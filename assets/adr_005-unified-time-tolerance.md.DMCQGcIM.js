import{_ as i,c as a,o as n,aj as t}from"./chunks/framework.Bbpi2Fiw.js";const p=JSON.parse('{"title":"ADR-005 Unified Time Tolerance","description":"","frontmatter":{},"headers":[],"relativePath":"adr/005-unified-time-tolerance.md","filePath":"adr/005-unified-time-tolerance.md","lastUpdated":1764705171000}'),r={name:"adr/005-unified-time-tolerance.md"};function o(s,e,l,c,d,m){return n(),a("div",null,[...e[0]||(e[0]=[t('<h1 id="adr-005-unified-time-tolerance" tabindex="-1">ADR-005 Unified Time Tolerance <a class="header-anchor" href="#adr-005-unified-time-tolerance" aria-label="Permalink to “ADR-005 Unified Time Tolerance”">​</a></h1><p><strong>Status:</strong> Accepted <strong>Date:</strong> 2025-09 <strong>Tags:</strong> time, consistency, cross-backend</p><h2 id="problem" tabindex="-1">Problem <a class="header-anchor" href="#problem" aria-label="Permalink to “Problem”">​</a></h2><p>The original <code>timeMode</code> design created inconsistent semantics: <code>timeMode: &quot;strict&quot;</code> meant 0ms tolerance on Redis (server-time) but 1000ms on Firestore (client-time minimum safe). This violated predictable cross-backend behavior and created operational risks when switching backends.</p><h2 id="decision" tabindex="-1">Decision <a class="header-anchor" href="#decision" aria-label="Permalink to “Decision”">​</a></h2><p>Remove <code>timeMode</code> configuration entirely and use unified 1000ms tolerance across all backends:</p><ul><li>Single <code>TIME_TOLERANCE_MS</code> constant in interface.md</li><li>Same configuration produces identical liveness semantics</li><li>Backend switching preserves lock behavior</li><li>No conditional tolerance mapping needed</li></ul><h2 id="alternatives-brief" tabindex="-1">Alternatives (brief) <a class="header-anchor" href="#alternatives-brief" aria-label="Permalink to “Alternatives (brief)”">​</a></h2><ul><li>Keep timeMode with per-backend semantics — confusing, unpredictable behavior</li><li>Zero tolerance for all backends — unrealistic for client-time systems</li></ul><h2 id="impact" tabindex="-1">Impact <a class="header-anchor" href="#impact" aria-label="Permalink to “Impact”">​</a></h2><ul><li>Positive: Predictable behavior, testing simplicity, operational safety during backend migration</li><li>Negative/Risks: Removes fine-grained control (deemed unnecessary complexity)</li></ul><h2 id="links" tabindex="-1">Links <a class="header-anchor" href="#links" aria-label="Permalink to “Links”">​</a></h2><ul><li>Code/Docs: <code>docs/specs/interface.md</code> (TIME_TOLERANCE_MS), <code>common/time-predicates.ts</code></li><li>Related ADRs: None</li></ul>',13)])])}const f=i(r,[["render",o]]);export{p as __pageData,f as default};
