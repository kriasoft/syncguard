import{_ as i,c as a,o,aj as t}from"./chunks/framework.Bbpi2Fiw.js";const u=JSON.parse('{"title":"ADR-011 Relaxed Atomicity for Diagnostic Lookup","description":"","frontmatter":{},"headers":[],"relativePath":"adr/011-relaxed-lookup-atomicity.md","filePath":"adr/011-relaxed-lookup-atomicity.md","lastUpdated":1764705171000}'),r={name:"adr/011-relaxed-lookup-atomicity.md"};function s(n,e,l,c,d,m){return o(),a("div",null,[...e[0]||(e[0]=[t('<h1 id="adr-011-relaxed-atomicity-for-diagnostic-lookup" tabindex="-1">ADR-011 Relaxed Atomicity for Diagnostic Lookup <a class="header-anchor" href="#adr-011-relaxed-atomicity-for-diagnostic-lookup" aria-label="Permalink to “ADR-011 Relaxed Atomicity for Diagnostic Lookup”">​</a></h1><p><strong>Status:</strong> Accepted <strong>Date:</strong> 2025-10 <strong>Tags:</strong> lookup, atomicity, diagnostics</p><h2 id="problem" tabindex="-1">Problem <a class="header-anchor" href="#problem" aria-label="Permalink to “Problem”">​</a></h2><p>interface.md required atomic lookup (<code>MUST use atomic script/transaction</code>), but Firestore used non-atomic indexed queries. This created spec contradiction despite lookup being explicitly diagnostic-only—NOT a correctness guard.</p><h2 id="decision" tabindex="-1">Decision <a class="header-anchor" href="#decision" aria-label="Permalink to “Decision”">​</a></h2><p>Relax atomicity requirement to match diagnostic nature:</p><ul><li><strong>SHOULD be atomic</strong> for multi-key stores (Redis via Lua script)</li><li><strong>MAY be non-atomic</strong> for indexed stores (Firestore single indexed query)</li><li>Strong warning: lookup is for diagnostics/UI/monitoring ONLY—never gate mutations on it</li></ul><h2 id="alternatives-brief" tabindex="-1">Alternatives (brief) <a class="header-anchor" href="#alternatives-brief" aria-label="Permalink to “Alternatives (brief)”">​</a></h2><ul><li>Require atomicity everywhere — unnecessary overhead for Firestore</li><li>Remove lookup entirely — loses valuable diagnostic capability</li></ul><h2 id="impact" tabindex="-1">Impact <a class="header-anchor" href="#impact" aria-label="Permalink to “Impact”">​</a></h2><ul><li>Positive: Removes spec contradiction, simplifies Firestore, preserves Redis atomicity</li><li>Negative/Risks: None—no implementation changes needed</li></ul><h2 id="links" tabindex="-1">Links <a class="header-anchor" href="#links" aria-label="Permalink to “Links”">​</a></h2><ul><li>Code/Docs: <code>docs/specs/interface.md</code> (Lookup Operation), backend specs</li><li>Related ADRs: ADR-003 (ownership verification for mutations)</li></ul>',13)])])}const h=i(r,[["render",s]]);export{u as __pageData,h as default};
